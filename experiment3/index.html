<!DOCTYPE html>
<html>

<head>
	<!-- This title is used for tabs and bookmarks -->
	<title>Experiment 3 - Ruins in a 90's Dungeon Crawler, a Room Generator</title>

	<!-- Use UTF character set, a good idea with any webpage -->
	<meta charset="UTF-8" />
	<!-- Set viewport so page remains consistently scaled w narrow devices -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<!-- Include CSS file, including a site-wide CSS and for this particular page -->
	<link rel="stylesheet" type="text/css" href="../css/site.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<!-- Load jQuery library -->
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<!-- Load p5.js library -->
	<script src="https://cdn.jsdelivr.net/npm/p5@1.9.2/lib/p5.js"></script>

	<!-- Link to javascript files - DEFER waits until all elements are rendered -->
	<script type="text/javascript" src="../js/site.js" DEFER></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js"
		integrity="sha512-b/htz6gIyFi3dwSoZ0Uv3cuv3Ony7EeKkacgrcVg8CMzu90n777qveu0PBcbZUA7TzyENGtU+qZRuFAkfqgyoQ=="
		crossorigin="anonymous"></script>
	<script src="./js/p2_base.js" defer></script>
	<script src="./js/p2_solution.js" defer></script>
</head>

<body>
	<!-- Style this page by changing the CSS in ../css/site.css or css/experiment.css -->
	<main id="content">
		<section>

			<h1>Experiment 3 - Ruins in a 90's Dungeon Crawler, a Room Generator</h1>

			<div class="minor-section">
				<button id="reseedButton">
					reseed
				</button>
				<span id="seedReport"></span>
				<hr />
				<span id="canvasContainer" style="margin: 10px;"></span>
				<textarea cols="20" rows="20" id="asciiBox"
					style="opacity: 0.5; letter-spacing: 1ex; width: 320px; margin: 10px; font-family: monospace;"></textarea>
				<div class="fullscreen-box">
					<button id="fullscreen">Fullscreen</button>
				</div>
			</div>

			<div class="minor-section">

				<h2>Artist's Statement</h2>
				<h3>Description (describe your overworlds or dungeons), Code (describe the meaning of your text codes),
					and Life (how does your scene respond to mouse movement or time passing?)</h3>
				<p><b>Description</b>: A rectangular-room dungeon generator, meant to look like a worn down temple with
					criss-crossing hallways and chests a' plenty.
					<br>
					<b>Codes</b>:
					- W: Walls, they border hallways, doors and rooms
					- R: Rooms, they are rectangular and house chests and have extending hallways
					- D: Doors, they are adjacent to the exits of hallways connected to rooms
					- H: Hallways, there will be up to 4 hallways connecting any given room.
					<br>
					<b>Life</b> The display of the dungeon flickers and blooms with a CRT scanline display. The
					scanlines darken and alternate pixel row so fast that it gives the appearance of a bloomy CRT
					display. There is a slight glow around the chests that are generated, and there is a replication of light glinting off of the 
					staircases in the doorways between hallways.
				</p>
				<p>(using tiles from [Micro Tileset - Overworld &
					Dungeon](https://thkaspar.itch.io/micro-tileset-overworld-dungeon) by
					[thkaspar](https://thkaspar.itch.io/))
				</p>
			</div>

			<div class="minor-section">
				<h2>Description</h2>
				<p>What are you trying to acomplish with this experiment?</p>
				<p>I wanted to make a dungeon generator that generates dungeons similar to those in 90's dungeon crawler games.
					I wanted to add to the retro aesthetic by creating a sort-of shader that mimics the bloom and scanlines of a CRT televsion.
					I created the rooms in the dungeon so that the rectangles would never overlap eachother and that hallways would form intersections.
					I added some animation of light gleaming off of the chests and animated the doorways to simulate light leaking into the entrances to hallways.
				</p>
			</div>

			<div class="minor-section">
				<h2>Technical</h2>
				<p>Describe in detail what you did technically and how it works?</p>
				<p>I use a function that attempts to place rectangles of the room code on top of any wall codes that it can. It attempts to do so over a certain number of attempts until it 
					successfully places the correct number of rooms or it runs out of attempts. Then the rooms start generating their hallway codes starting with a door code at the beginning of the hallway.
					As the hallways are generating, if they try to generate over any code that is not a wall code, it will stop generating the hallway in order to create interesting, realistic interstections 
					of pathways, and not just infinite hallways in all directions. There is a shader-like function that I created that controls the overall look of the dungeon. It generates scanlines and flicker
					by alternating an offset between illuminating different alternating rows of pixels. It also routinely blooms and dims like a display that is losing power. I use randomization to place chests in rooms
					and I overlay glowing lights on top of the chests to draw the attention of the viewer. I also animated the doorways so they would cycle through nearby door tiles in the spritesheet to give the appearance of light 
					entering the doorway. <br><br>
					For the autotiling, I made refactors to the way that drawContext() and the lookup array worked so that several wall tiles could be placed over the top of one another. I noticed that if there were conditions where one
					tile needed to be able to represent multiple walls, there would be no way for it to overlay the correct tiles without refactoring the lookup array to hold multiple tile offsets to apply, which I have done. There is also noticable
					variations in the floors and walls to give it the look of a worn down dungeon that has not seen an explorer in a long time.
				</p>
			</div>

			<div class="minor-section">
				<h2>Reflection</h2>
				<p>Each person that worked on the code should reflect on the process, the difficulties, and the successes of the experiment.</p>
				<p>I had a fantastic time with this project because tile based worlds with autotiling was one of the main things I was excited to learn about in this class.
					It was so fun to learn to build the code that is used by the lookup array because I love bitwise operations and bitfields and how incredible their capabilities are 
					for storing complex information. I really wish I could've figured out instance mode to show off the other generator I made, but I am keeping it in my repository to look back on and improve
					over time, and I can always share the link to the Glitch implementation as well.
				</p>
			</div>

		</section>
		<nav id="links" class="minor-section">
			<!-- Put link back to homepage here. -->
			<ul>
				<li><a href="../index.html">Home</a></li>
			</ul>
		</nav>
	</main>
</body>

</html>